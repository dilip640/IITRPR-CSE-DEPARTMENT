<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	
  
    <!-- Bootstrap CSS -->
	 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.min.js" ></script>
	<link rel="stylesheet" href="../css/style.css" >
	<link rel="stylesheet" href="../css/bootstrap-4-navbar.css" >
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Hello, world!</title>
  </head>
  
  <body>
  <div class="container main">
	<div class="row nvbar">
		<div class="col-2">
          <img src="../img/logo.jpg" alt="">
		</div>
		<div class="col-10">
          <h3 class="maintitle">DEPARTMENT OF COMPUTER SCIENCE AND ENGINEERING</h3>
          <h5>Indian Institute of Technology-Ropar</h5>
		</div>
	</div>
  
  <nav class="navbar navbar-expand-md navbar-dark bg-dark">
                
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNavDropdown">
                    <ul class="navbar-nav">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                        </li>
                       
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                People
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">faculty</a></li>
                                <li><a class="dropdown-item" href="#">post doctorate</a></li>
                                <li><a class="dropdown-item dropdown-toggle" href="#">students</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Btech</a></li>
                                        <li><a class="dropdown-item" href="#">Ms()</a></li>
                                        <li><a class="dropdown-item" href="#">Phd</a></li>

                                    </ul>
                                </li>
								<li><a class="dropdown-item" href="#">post doctorate</a></li>
                              <!--  <li><a class="dropdown-item dropdown-toggle" href="#">Submenu 2</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Submenu action 2</a></li>
                                        <li><a class="dropdown-item" href="#">Another submenu action 2</a></li>


                                    </ul>
                                </li>  -->
                            </ul>
                        </li>
						  <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Academics
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                              <!--  <li><a class="dropdown-item" href="#">Programmes</a></li> -->
                              <!--  <li><a class="dropdown-item" href="#"></a></li>  -->
                                <li><a class="dropdown-item dropdown-toggle" href="#">Programs</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Btech</a></li>
                                        <li><a class="dropdown-item" href="#">Ms(R)</a></li>
                                        <li><a class="dropdown-item" href="#">phd</a></li>
                                        <li><a class="dropdown-item" href="#">Mtech</a></li>


                                    </ul>
                                </li>
                                <li><a class="dropdown-item dropdown-toggle" href="#">course offered</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Undergraduate</a></li>
                                        <li><a class="dropdown-item" href="#">postgraduate</a></li>


                                    </ul>
                                </li>
                            </ul>
                        </li>
						
						  <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              Research
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">Areas of Research</a></li>
                                <li><a class="dropdown-item" href="#">Acse lab</a></li>  
                                <li><a class="dropdown-item" href="#">computer vison</a></li>  
                                <li><a class="dropdown-item" href="#">Computational<br> Resources @ IITRPR</a></li>  
                            <!--    <li><a class="dropdown-item dropdown-toggle" href="#">ACSE Lab</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Submenu action</a></li>
                                        <li><a class="dropdown-item" href="#">Another submenu action</a></li>


                                    </ul>
                                </li> 
                                <li><a class="dropdown-item dropdown-toggle" href="#">Submenu 2</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">Submenu action 2</a></li>
                                        <li><a class="dropdown-item" href="#">Another submenu action 2</a></li>


                                    </ul>
                                </li>  -->
                            </ul>
                        </li>
						
						  <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              join us
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">faculty</a></li>
                                <li><a class="dropdown-item" href="#">PhD/MS(R)</a></li>  
                                <li><a class="dropdown-item" href="#">B-Tech</a></li>  
                                <li><a class="dropdown-item" href="#">M-Tech</a></li>  
                                <li><a class="dropdown-item" href="#">FAQ</a></li>  
								
                             <!--   <li><a class="dropdown-item dropdown-toggle" href="#">btech</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">CSE</a></li>
                                        <li><a class="dropdown-item" href="#">EE</a></li>


                                    </ul>
                                </li>
                                <li><a class="dropdown-item dropdown-toggle" href="#">Mtech</a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#">CSE</a></li>
                                        <li><a class="dropdown-item" href="#">MECH</a></li>
                                    </ul>
                                </li> -->
                            </ul>
                        </li>
						
						<li class="navbar-item">
			<a class="nav-link" href="#">Contact Us</a>
		                </li>
						
					</ul>
						
			<!--	<form class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Login</button>
    </form>  -->
						
						
                    
                </div>
													<form class="form-inline my-2 my-lg-0">
      <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Login</button>
    </form>
			
            </nav>
	</div>
	<?php
		require("../db.php");
		$id=$_GET['id'];
		$result = mysqli_query($con,"SELECT * FROM course_detail WHERE id='".$id."'");
		$row = mysqli_fetch_array($result);
		$name=$row['name'];
	?>
    <div class="container sec">
		<div class="row">
			<div style="padding:1.5%" class="col-md-12"><a href="/"> Home </a><a href="/"> » Ug courses</a> »<?php echo $name; ?> </div>
		</div>
		<div class="row">
			<div class="col-md-12">
			<h4 class="text-danger"><?php echo $name; ?> </h4>
			</div>
		</div>
        <br>
	<div class="row">
		<div class="col-md-12">
			<h5>Syllabus</h5><hr>
                <ul class="list-group">
                <li style="background: #ececec;" class="list-group-item"><p data="syllabus" class="text-justify editable"><?php echo $row['syllabus']; ?> </p></li>
                </ul>
		</div>
	</div><br>
    <div class="row">
		<?php
			$m_text = explode("#",$row['m_text']);
			$r_text = explode("#",$row['r_text']);
		?>
		<div class="col-md-6">
			<h5>Main Textbooks<hr></h5>
		<div class="row">
			<ul>
			<?php
				for($i=0;$i<count($m_text)-1;$i++)
					echo '<li class="li_data" data="'.$m_text[$i].'">'.$m_text[$i].' <a class="m_text" href=""><i class="fa fa-times"></i></a></li>';
			?>
			</ul>
		 </div>
		 <div class="row">
		 <div class="col-md-4">
				<input id="m_text_add" type="text" class="form-control data" placeholder="text book" required>
			</div>
			<div class="col-md-2">
				<button type="submit" class="btn btn-primary m_text_add">Add</button>
			</div>
		 </div>
		</div>
		<div class="col-md-6">
			<h5>Reference Textbooks<hr></h5>
		 <div class="row">
			<ul>
			<?php
				for($i=0;$i<count($r_text)-1;$i++)
					echo '<li class="li_data" data="'.$r_text[$i].'">'.$r_text[$i].' <a class="r_text" href=""><i class="fa fa-times"></i></a></li>';
			?>
			</ul>
		 </div>
		 <div class="row">
		 <div class="col-md-4">
				<input id="r_text_add" type="text" class="form-control data" placeholder="text book" required>
			</div>
			<div class="col-md-2">
				<button type="submit" class="btn btn-primary r_text_add">Add</button>
			</div>
		 </div>
		</div>
    </div><br>
    <div class="row">
		<div class="col-md-12">
        <h5>Course Requirements and Stucture<hr></h5>
        <p>The hours mentioned are time a student should spend in a week.</p>
		</div>
		<div class="col-md-6">
			<h5>Pre-requisites<hr></h5>
			<div class="row">
				<ul>
				<?php
					$temp=explode("#",$row['pre_req']);
					for($i=0;$i<count($temp)-1;$i++)
						echo '<li class="li_data" data="'.$temp[$i].'">'.$temp[$i].' <a class="pre_req" href=""><i class="fa fa-times"></i></a></li>';
				?>
				</ul>
			</div>
			<div class="row">
				<div class="col-md-4">
					<input id="pre_req_add" type="text" class="form-control" placeholder="pre_req" required>
				</div>
				<div class="col-md-2">
					<button type="submit" class="btn btn-primary pre_req_add">Add</button>
				</div>
			</div>
		</div>
		<div class="col-md-6">
        <h5>Credits Distribution<hr></h5>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th scope="col">Lecture Hours</th>
                    <th scope="col">Tutorial Hours</th>
                    <th scope="col">Practical Hours</th>
                    <th scope="col">Self-study Hours</th>
                    <th scope="col">Total credits</th>
                </tr>
            </thead>
            <tbody>
                <tr id="credit">
				<?php
					$temp=explode("#",$row['credits']);
					for($i=0;$i<5;$i++)
						echo '<td data="credit" class="editable">'.$temp[$i].'</td>';
				?>
                </tr>
            </tbody>
        </table>
		</div>
    </div><br>
    <div class="row">
		<div class="col-md-12">
			<h5>Previous Instances of this course<hr></h5>
		</div>
		<div class="col-md-6">
			<div class="list-group redtext">
			<?php
				$result = mysqli_query($con,"SELECT * FROM instructer_info WHERE course_id='".$id."' ");
				while(($row = mysqli_fetch_array($result))){
					echo'<ul row_id="'.$row['id'].'"><li> '.$row['time'].' <a class="ins_info" href=""><i class="fa fa-times"></i></a><br>
					instructor: '.html_entity_decode($row['instructor']).' <br>
					course cordinator: '.html_entity_decode($row['c_cordinator']).'
					</li></ul>';
				}
				mysqli_close($con);
			?>
			</div>
		</div>
		<div class="col-md-6">
			<div id="inform" class="row">
				<div class="col-md-12">
					<input type="text" class="form-control data" col_name="time" placeholder="Time Interval e.g. Jul 2018 - Dec 2018" required><br>
				</div>
				<div class="col-md-12">
					<input type="text" class="form-control data" col_name="instructor" placeholder="Instructors" required><br>
				</div>
				<div class="col-md-12">
					<input type="text" class="form-control data" col_name="cordinator" placeholder="Co-ordinator" required><br>
				</div>
				<div class="col-md-3">
					<button type="submit" class="btn btn-primary ins_info_add">Add</button>
				</div>
				<div class="col-md-8">
				</div>
				<div style="margin-top:20px" class="col-md-12">
					<div class="alert alert-info" role="alert">
						<strong>Note!</strong> To add Instructor or Co-ordinator add like below :- <br>
						<xmp><a href="link to profile">Prof. abc</a></xmp>
						To add multimple separate by comma
					</div>
				</div>
			</div>
		</div>
    </div> 
    <br>
	<div class="footer">
		<footer class="card-footer bg-dark text-center text-white footer-position">
			<h6>Copyright © 2018, Department of Computer Science and Engineering</h6>
		</footer>
	</div>
    </div>
	
	<script>
		$(document).on('click', '.editable', function(event){
			event.preventDefault();
			if($(this).attr('edit_type') == 'button')
			{
				return false; 
			}

			//make div editable
			$(this).attr('contenteditable', 'true');
			//add bg css
			$(this).addClass('bg-light').css('padding','5px');

			$(this).focus();
		});
		$(document).on('focusout', '.editable', function(event){
			event.preventDefault();

			if($(this).attr('edit_type') == 'button')
			{
				return false; 
			}

			$(this).attr('contenteditable', 'false');
			//add bg css
			$(this).removeClass('bg-light').css('padding','');
			
			if($(this).attr('data')=='credit'){
				var arr = {}; 
				var i=0;
				$('#credit').find('.editable').each(function(index, val) 
				{   
					var col_val  =  $(this).html();
					arr[i++] = col_val;
				});
				$.extend(arr, {id:"<?php echo $id; ?>"});
				$.extend(arr, {type:"credit"});
				$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
				});
			}
			else{
				var arr = {}; 
				$.extend(arr, {syllabus:$(this).html()});
				$.extend(arr, {type:"syllabus"});
				$.extend(arr, {id:"<?php echo $id; ?>"});
				$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
				});
			}
		});
		$(document).on('click', '.m_text', function(event){
			event.preventDefault();
			var ul=$(this).closest('ul');
			$(this).closest('li').remove();
			var m_texts='';
			ul.find('.li_data').each(function(index, val) 
			{   
				m_texts+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {m_text:m_texts});
			$.extend(arr, {type:'m_text'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$('.post_msg').html( '<pre class="bg-success">'+JSON.stringify(arr, null, 2) +'</pre>');
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
			});
		});
		$(document).on('click', '.r_text', function(event){
			event.preventDefault();
			var ul=$(this).closest('ul');
			$(this).closest('li').remove();
			var r_texts='';
			ul.find('.li_data').each(function(index, val) 
			{   
				r_texts+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {r_text:r_texts});
			$.extend(arr, {type:'r_text'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$('.post_msg').html( '<pre class="bg-success">'+JSON.stringify(arr, null, 2) +'</pre>');
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
			});
		});
		$(document).on('click', '.pre_req', function(event){
			event.preventDefault();
			var ul=$(this).closest('ul');
			$(this).closest('li').remove();
			var pre_reqs='';
			ul.find('.li_data').each(function(index, val) 
			{   
				pre_reqs+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {pre_req:pre_reqs});
			$.extend(arr, {type:'pre_req'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
			});
		});
		$(document).on('click', '.ins_info', function(event){
			event.preventDefault();
			var ul_id=$(this).closest('ul').attr('row_id');
			$(this).closest('ul').remove();
			var arr = {}; 
			$.extend(arr, {ins_info_id:ul_id});
			$.extend(arr, {type:'ins_info'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
					}
			});
		});
		$(document).on('click', '.m_text_add', function(event){
			event.preventDefault();
			var m_texts=$('#m_text_add').val()+'#';
			var ul=$('.m_text').closest('ul');
			ul.find('.li_data').each(function(index, val) 
			{   
				m_texts+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {m_text:m_texts});
			$.extend(arr, {type:'m_text'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
						location.reload();
					}
			});
		});
		$(document).on('click', '.r_text_add', function(event){
			event.preventDefault();
			var r_texts=$('#r_text_add').val()+'#';
			var ul=$('.r_text').closest('ul');
			ul.find('.li_data').each(function(index, val) 
			{   
				r_texts+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {r_text:r_texts});
			$.extend(arr, {type:'r_text'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
						location.reload();
					}
			});
		});
		$(document).on('click', '.pre_req_add', function(event){
			event.preventDefault();
			var pre_reqs=$('#pre_req_add').val()+'#';
			var ul=$('.pre_req').closest('ul');
			ul.find('.li_data').each(function(index, val) 
			{   
				pre_reqs+=$(this).attr('data')+'#';
			});
			var arr = {}; 
			$.extend(arr, {pre_req:pre_reqs});
			$.extend(arr, {type:'pre_req'});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.ajax({
					url: 'edit_course.php',
					type: 'POST',
					data: JSON.stringify(arr),
					contentType: 'application/json; charset=utf-8',
					dataType: 'json',
					async: false,
					success: function(msg) {
						//alert('d');
						location.reload();
					}
			});
		});
		$(document).on('click', '.ins_info_add', function(event){
			event.preventDefault();
			var arr = {}; 
			var inform = $('#inform');
			inform.find('.data').each(function(index, val) 
			{   
				var col_name = $(this).attr('col_name');  
				var col_val  =  $(this).val();
				arr[col_name] = col_val;
			});
			$.extend(arr, {id:"<?php echo $id; ?>"});
			$.extend(arr, {type:'ins_info_add'});
			$.ajax({
				url: 'edit_course.php',
				type: 'POST',
				data: JSON.stringify(arr),
				contentType: 'application/json; charset=utf-8',
				dataType: 'json',
				async: false,
				success: function(msg) {
					//alert(msg);
					location.reload();
				},
			});
		});
	</script>
	<div class="post_msg"> </div>
  <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <script src="../js/bootstrap-4-navbar.js"></script>
   
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</body>

</html>